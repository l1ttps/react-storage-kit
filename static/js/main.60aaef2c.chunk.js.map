{"version":3,"sources":["../../src/utils/getBrowserInfo.ts","../../src/utils/fingerPrint.ts","../../src/utils/syncStorage.ts","../../src/hooks/useLocalStorage.ts","../../src/hooks/useStorageKit.ts","App.tsx","index.tsx"],"names":["screen","window","navigator","getTimeZone","myNumber","rightNow","formattedNumber","getCanvasPrint","canvas","document","ctx","e","txt","getDeviceId","sha256","hash","cryptoJs","genKeyStorage","keyStorage","deviceId","useLocalStorage","key","useState","decrypt","localStorage","JSON","getStorage","error","console","storedValue","value","valueToStore","setStoredValue","encrypt","setStorage","App","storage","getAll","getMultiple","keys","result","data","getItem","getKey","setItem","setData","removeItem","_data","clear","useStorageKit","valueLocalStorage","initialValue","handleSetNewValue","event","preventDefault","newValue","setNewValue","setGetAll","className","onSubmit","placeholder","onChange","target","onClick","checked","type","id","htmlFor","Object","map","index","length","onDelete","name","handleRemoveItem","src","ReactDOM","render","getElementById"],"mappings":"mVAAMA,EAASC,OAAf,OACMC,EAAYD,OAAlB,UA0BaE,EAAc,WACzB,MAWA,OATAC,IADW,IAAXC,MACaA,oBAAbD,IACA,EAGW,KADU,KADnBA,QACkB,OAAlBE,GAIS,KADU,IAAD,UAAlBA,IAkBSC,EAAiB,WAC5B,IACA,EADIC,EAASC,uBAAb,UAEA,IACEC,EAAMF,aAANE,MACA,MAAOC,GACP,SAEF,IAAIC,EAAJ,oBAUA,OATAF,qBACAA,sBACAA,4BACAA,mBACAA,wBACAA,mBACAA,mBACAA,qCACAA,mBACOF,EAAP,aCnEIK,EAAc,kBAClBC,IAAOC,IDsEA,CACLR,IAlCKL,EAAP,SAxBO,CAhBAF,YAAqBA,EAA5B,OAIOA,iBAA0BA,EAAjC,YAIOA,EAAP,WAIOA,EAAP,YAIO,KAAP,OA4BOC,iBAAP,SAkCEE,IA9BKD,EAAP,eAyBO,KAAP,OCtEOa,KAAPD,qBAAwDE,QAD1D,MAGMC,EAAgB,WACpB,OAAOJ,YAAP,ICNIK,EAAaD,IACbE,EAAWN,ICFjB,IAAMO,EAAkB,SAACC,EAAD,GACtB,MAAsCC,oBAAS,WAC7C,wBAAWrB,OACT,SAEF,IAGE,OAFaA,4BAAb,GDGN,WACE,IACE,IAAMsB,EAAUP,gBACdQ,qBADcR,eAGLA,QAHX,MAIA,OAAOS,WAAP,GAEF,MAAOd,GACL,UCVgBe,GAAd,EACA,MAAOC,GAEP,OADAC,eACA,MAVJ,mBAAM,EAAN,KAAM,EAAN,KA4BA,MAAO,CAACC,EAdUC,YAChB,IACE,IAAMC,EACJD,sBAA4BA,EAA5BA,GADF,EAGAE,KAEA,qBAAW/B,QDlBG6B,YAClB,IAAMG,EAAUjB,gBAAqBS,eAArBT,GAAhB,GACAQ,0BCiBMU,IAEF,MAAOP,GACPC,mBC1BAV,EAAaD,I,iBC6GJkB,EA3GH,WACV,IAAMC,EDDc,WACpB,MAAwBhB,EAAxB,sBAAM,EAAN,KAAM,EAAN,KA0CA,MAzCgB,CACdiB,OAAQ,kBADM,GAGdC,YAAcC,YACZ,IAAMC,EAAN,GACA,UACAD,WAAclB,YACRoB,iBAAJ,KACED,KAAcC,EAAdD,OAGJ,GANkB,IASpBE,QAAUrB,YACR,IACE,OAAOoB,EAAP,GACA,MAAO9B,GACP,cAIJgC,OAAQ,kBAtBM,GAwBdC,QAAS,cACPC,EAAQ,8BAAD,kBAAY,EAAOf,MAG5BgB,WAAazB,YACX,GAAKoB,iBAAL,IACA,IAAMM,EAAQ,eAAKN,UACZM,EAAP,GACAF,EAAQ,eAAKE,MAGfC,MAAO,WACLH,IACArB,6BCtCYyB,GACV5B,EAAMe,EAAQO,SACdO,EAAoB1B,aAAakB,QAAQrB,GACzC8B,EAAe,CACnB9B,IAAK,GACLS,MAAO,IAGHsB,EAAoB,SAACC,GACzBA,EAAMC,iBACgB,KAAjBC,EAASlC,KAAiC,KAAnBkC,EAASzB,QACnCM,EAAQQ,QAAQW,EAASlC,IAAKkC,EAASzB,OACvC0B,EAAYL,KAYhB,EAA4B7B,oBAAS,GAArC,mBAAOe,EAAP,KAAeoB,EAAf,KACA,EAAgCnC,mBAAS6B,GAAzC,mBAAOI,EAAP,KAAiBC,EAAjB,KAEA,OACE,yBAAKE,UAAU,qBACb,yBAAKA,UAAU,QACb,wBAAIA,UAAU,iBAAd,8BAIF,yBAAKA,UAAU,4BACb,yBAAKA,UAAU,8CACb,0BAAMC,SAAUP,EAAmBM,UAAU,kCAC3C,2BACEE,YAAY,MACZ9B,MAAOyB,EAASlC,IAChBwC,SAAU,SAAClD,GAAD,OACR6C,EAAY,2BAAKD,GAAN,IAAgBlC,IAAKV,EAAEmD,OAAOhC,UAE3C4B,UAAU,+CAEZ,2BACEE,YAAY,QACZC,SAAU,SAAClD,GAAD,OACR6C,EAAY,2BAAKD,GAAN,IAAgBzB,MAAOnB,EAAEmD,OAAOhC,UAE7CA,MAAOyB,EAASzB,MAChB4B,UAAU,+CAEZ,4BACEK,QAASX,EACTM,UAAU,kEAFZ,QAQF,yBAAKA,UAAU,qEACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,cACb,2BAAOM,QAAS3B,EAAQwB,SAAU,kBAAMJ,GAAU,IAAOC,UAAU,6PAA6PO,KAAK,WAAWnC,MAAM,GAAGoC,GAAG,qBAC5V,2BAAOR,UAAU,8CAA8CS,QAAQ,oBACrE,mDAGJ,yBAAKT,UAAU,uBACb,2BAAOM,SAAU3B,EAAQwB,SAAU,kBAAMJ,GAAU,IAAQC,UAAU,6PAA6PO,KAAK,WAAWnC,MAAM,GAAGoC,GAAG,qBAC9V,2BAAOR,UAAU,8CAA8CS,QAAQ,oBACrE,qDAA2BC,OAAO7B,KAAKH,EAAQC,UAAW,IAAIgC,KAAI,SAAChD,EAAKiD,GACtE,OAAOA,GAAS,GAAK,0BAAMjD,IAAKiD,GAAX,IACjBjD,EADiB,IACXiD,EAAQF,OAAO7B,KAAKH,EAAQC,UAAUkC,OAAS,GAAK,QAFhE,SAQN,4BACER,QAjEW,WACrB3B,EAAQY,SAiEEU,UAAU,gEAFZ,cAOF,6BACE,uBAAGA,UAAU,QAAb,iBACA,yBAAKA,UAAU,0CACZR,IAGL,6BACE,uBAAGQ,UAAU,QAAb,qBACA,yBAAKA,UAAU,wCAEb,kBAAC,IAAD,CAAWc,SAAU,SAACnB,GAAD,OAAWA,EAAMoB,MA7EzB,SAACpD,GACxBe,EAAQU,WAAWzB,GA4EqCqD,CAAiBrB,EAAMoB,OAAOpD,IAAK,EAAGsD,IAAKvC,EAAQC,iBChG/GuC,IAASC,OAAO,kBAAC,EAAD,MAASpE,SAASqE,eAAe,W","file":"static/js/main.60aaef2c.chunk.js","sourcesContent":["const screen = window.screen;\nconst navigator = window.navigator\nconst getCurrentResolution = () => {\n  return screen.width + \"x\" + screen.height;\n};\n\nconst getAvailableResolution = () => {\n  return screen.availWidth + \"x\" + screen.availHeight;\n};\n\nconst getColorDepth = () => {\n  return screen.colorDepth;\n};\n\nconst getPixelDepth = () => {\n  return screen.pixelDepth;\n};\n\nexport const getScreenPrint = () => {\n  return [\n    getCurrentResolution(),\n    getAvailableResolution(),\n    getColorDepth(),\n    getPixelDepth(),\n  ].join(\" | \");\n};\n\nexport const getTimeZone = () => {\n  var rightNow, myNumber, formattedNumber, result;\n  rightNow = new Date();\n  myNumber = -(rightNow.getTimezoneOffset() / 60)\n  if (myNumber < 0) {\n    myNumber = myNumber * -1;\n    formattedNumber = (\"0\" + myNumber).slice(-2);\n    result = \"-\" + formattedNumber;\n  } else {\n    formattedNumber = (\"0\" + myNumber).slice(-2);\n    result = \"+\" + formattedNumber;\n  }\n  return result;\n};\n\nexport const getLanguage = () => {\n  return navigator.language;\n};\n\nexport const getSystemLanguage = () => {\n  return window.navigator.language;\n};\n\nexport const isCookie = () => {\n  return navigator.cookieEnabled;\n};\n\nexport const getCanvasPrint = () => {\n  var canvas = document.createElement(\"canvas\");\n  var ctx: any;\n  try {\n    ctx = canvas.getContext(\"2d\");\n  } catch (e) {\n    return \"\";\n  }\n  var txt = \"react-storage-kit\";\n  ctx.textBaseline = \"top\";\n  ctx.font = \"14px 'Arial'\";\n  ctx.textBaseline = \"alphabetic\";\n  ctx.fillStyle = \"#f60\";\n  ctx.fillRect(125, 1, 62, 20);\n  ctx.fillStyle = \"#069\";\n  ctx.fillText(txt, 2, 15);\n  ctx.fillStyle = \"rgba(102, 204, 0, 0.7)\";\n  ctx.fillText(txt, 4, 17);\n  return canvas.toDataURL();\n};\n\nconst getBrowserData = () => {\n  return [\n    getCanvasPrint(),\n    getLanguage(),\n    getScreenPrint(),\n    getSystemLanguage(),\n    getTimeZone(),\n    isCookie(),\n  ].join(\" | \");\n};\n\nexport default getBrowserData;\n","import hash from \"murmurhash-js/murmurhash2_gc\";\nimport sha256 from \"crypto-js/sha256\";\nimport getBrowserData from \"./getBrowserInfo\";\nimport cryptoJs from \"crypto-js\";\n\nconst getDeviceId = () =>\n  sha256(hash(getBrowserData(), 256).toString()).toString(cryptoJs.enc.Hex);\n\nconst genKeyStorage = (): string => {\n  return getDeviceId().slice(0, 6);\n};\n\nexport { getDeviceId, genKeyStorage };\n","import cryptoJs from \"crypto-js\";\nimport { genKeyStorage, getDeviceId } from \"./fingerPrint\";\n\nconst keyStorage = genKeyStorage();\nconst deviceId = getDeviceId();\n\nconst setStorage = (value: any) => {\n  const encrypt = cryptoJs.AES.encrypt(JSON.stringify(value), deviceId);\n  localStorage.setItem(keyStorage, encrypt as any);\n};\n\nfunction getStorage(): object {\n  try {\n    const decrypt = cryptoJs.AES.decrypt(\n      localStorage.getItem(keyStorage) as any,\n      deviceId\n    ).toString(cryptoJs.enc.Utf8);\n    return JSON.parse(decrypt);\n  }\n  catch (e) {\n    return {}\n  }\n};\n\nexport { getStorage, setStorage };\n","import { useState } from 'react'\nimport { getStorage, setStorage } from '../utils/syncStorage'\nconst useLocalStorage = (key: string, initialValue?: any) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    if (typeof window === 'undefined') {\n      return initialValue\n    }\n    try {\n      const item = window.localStorage.getItem(key)\n\n      return item ? getStorage() : initialValue\n    } catch (error) {\n      console.log(error)\n      return initialValue\n    }\n  })\n\n  const setValue = (value: any) => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n\n      setStoredValue(valueToStore)\n\n      if (typeof window !== 'undefined') {\n        setStorage(valueToStore)\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  return [storedValue, setValue]\n}\nexport { useLocalStorage }\n","import { genKeyStorage } from '../utils/fingerPrint'\nimport { useLocalStorage } from './useLocalStorage'\nconst keyStorage = genKeyStorage()\n\nconst useStorageKit = () => {\n  const [data, setData] = useLocalStorage(keyStorage)\n  const storage = {\n    getAll: (): object => data,\n\n    getMultiple: (keys: string[]) => {\n      const result = {}\n      if (!data) return {}\n      keys.forEach((key) => {\n        if (data.hasOwnProperty(key)) {\n          result[key] = data[key]\n        }\n      })\n      return result\n    },\n\n    getItem: (key: string): object | string | number | null => {\n      try {\n        return data[key]\n      } catch (e) {\n        return null\n      }\n    },\n\n    getKey: (): string => keyStorage,\n\n    setItem: (key: string, value: object | string | number): void => {\n      setData({ ...data, [key]: value })\n    },\n\n    removeItem: (key: string): void => {\n      if (!data.hasOwnProperty(key)) return;\n      const _data = { ...data }\n      delete _data[key]\n      setData({ ..._data })\n    },\n\n    clear: (): void => {\n      setData()\n      localStorage.removeItem(keyStorage)\n    }\n  }\n\n  return storage;\n}\n\nexport default useStorageKit\n","import React, { useState } from 'react'\nimport { useStorageKit } from 'react-storage-kit'\nimport ReactJson from 'react-json-view'\n\nconst App = () => {\n  const storage = useStorageKit()\n  const key = storage.getKey()\n  const valueLocalStorage = localStorage.getItem(key)\n  const initialValue = {\n    key: '',\n    value: ''\n  }\n\n  const handleSetNewValue = (event: any) => {\n    event.preventDefault();\n    if ((newValue.key !== '' || newValue.value !== '')) {\n      storage.setItem(newValue.key, newValue.value)\n      setNewValue(initialValue)\n    }\n  }\n  \n  const handleClearAll = () => {\n    storage.clear()\n  }\n\n  const handleRemoveItem = (key: string) => {\n    storage.removeItem(key)\n  }\n\n  const [getAll, setGetAll] = useState(true)\n  const [newValue, setNewValue] = useState(initialValue)\n\n  return (\n    <div className='lg:px-20 lg:py-10'>\n      <div className='px-5'>\n        <h1 className='text-4xl mb-5'>\n          React Storage Kit Example\n        </h1>\n      </div>\n      <div className='shadow-xl p-5 rounded-lg'>\n        <div className='grid lg:grid-cols-2 gap-4 my-5 grid-cols-1'>\n          <form onSubmit={handleSetNewValue} className=\"mb-5 flex flex-col lg:flex-row\">\n            <input\n              placeholder='key'\n              value={newValue.key}\n              onChange={(e) =>\n                setNewValue({ ...newValue, key: e.target.value })\n              }\n              className='border rounded-md p-2 lg:mr-3 mb-1 lg:mb-0'\n            />\n            <input\n              placeholder='value'\n              onChange={(e) =>\n                setNewValue({ ...newValue, value: e.target.value })\n              }\n              value={newValue.value}\n              className='border rounded-md p-2 lg:mr-3 mb-1 lg:mb-0'\n            />\n            <button\n              onClick={handleSetNewValue}\n              className='bg-blue-500 hover:bg-blue-700 text-white font-bold p-2 rounded'\n            >\n              Set\n            </button>\n          </form>\n\n          <div className='flex flex-col lg:flex-row lg:justify-between lg:items-center mb-5'>\n            <div className='mb-3'>\n              <div className=\"form-check\">\n                <input checked={getAll} onChange={() => setGetAll(true)} className=\"form-check-input appearance-none h-4 w-4 border border-gray-300 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer\" type=\"checkbox\" value=\"\" id=\"flexCheckDefault\" />\n                <label className=\"form-check-label inline-block text-gray-800\" htmlFor=\"flexCheckDefault\">\n                  <pre>storage.getAll()</pre>\n                </label>\n              </div>\n              <div className=\"form-check truncate\">\n                <input checked={!getAll} onChange={() => setGetAll(false)} className=\"form-check-input appearance-none h-4 w-4 border border-gray-300 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked\" />\n                <label className=\"form-check-label inline-block text-gray-800\" htmlFor=\"flexCheckChecked\">\n                  <pre>storage.getMultiple([{Object.keys(storage.getAll()|| {}).map((key, index) => {\n                    return index <= 3 && <span key={index}>\n                      \"{key}\"{index < Object.keys(storage.getAll()).length - 1 && \",\"}\n                    </span>\n                  })}])</pre>\n                </label>\n              </div>\n            </div>\n            <button\n              onClick={handleClearAll}\n              className='bg-red-500 hover:bg-red-700 text-white font-bold p-2 rounded'\n            >\n              Clear all\n            </button>\n          </div>\n          <div>\n            <b className='my-5'>Local Storage</b>\n            <div className='border rounded-md lg:h-96 p-5 truncate'>\n              {valueLocalStorage}\n            </div>\n          </div>\n          <div>\n            <b className='my-5'>react-storage-kit</b>\n            <div className='border rounded-md h-96 p-5 truncate '>\n              {/* @ts-ignore */}\n              <ReactJson onDelete={(event) => event.name && handleRemoveItem(event.name)} key={1} src={storage.getAll()}></ReactJson>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}